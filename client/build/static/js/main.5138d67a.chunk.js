(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,a,t){e.exports={Login:"LoginPage_Login__2gePA",inputBox:"LoginPage_inputBox__2kjS5",leftCol:"LoginPage_leftCol__a_FMq",rightCol:"LoginPage_rightCol__2u4Oe"}},29:function(e,a,t){},30:function(e,a,t){e.exports=t(66)},35:function(e,a,t){},64:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(27),l=t.n(s),o=(t(35),t(20)),i=t.n(o),c=t(28),m=t(8),u=t(9),h=t(11),d=t(10),p=t(12),g=t(69),E=t(71),v=t(70),b=t(68),f=function(e){return r.a.createElement("div",{className:"MainPage"},e.NavBar,r.a.createElement("br",null),"Main Page - Welcome!")},S=t(3),C=t(15),w=t.n(C),k=function(e){var a="";switch(e.error.type){case"auth_error":a=e.error.message;break;case"db_error":a=e.error.error.message;break;case"rate_error":a=e.error.message}return r.a.createElement("div",{className:"Error-panel"},r.a.createElement("p",null,a))},N=t(14),P=t.n(N),j=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={email:"",password:"",error:null,redirectToHome:!1},t.handleEmailChange=t.handleEmailChange.bind(Object(S.a)(Object(S.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(S.a)(Object(S.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(S.a)(Object(S.a)(t))),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),w.a.post("/auth/login",{email:this.state.email,password:this.state.password}).then(function(e){e.data.type.includes("error")?a.setState({error:e.data}):(localStorage.setItem("mapleToken",e.data.token),a.props.handleLogin(e.data),a.setState({error:null,redirectToHome:!0}))}).catch(function(e){a.setState({error:{type:"rate_error",status:429,message:"Maximum login attempts exceeded. Please try again later."},email:"",password:""})})}},{key:"render",value:function(){if(this.state.redirectToHome)return r.a.createElement(b.a,{to:"/"});var e=this.state.error?r.a.createElement(k,{error:this.state.error}):"";return r.a.createElement("div",{className:"LoginPage"},this.props.NavBar,r.a.createElement("h3",null,"Log in:"),e,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:P.a.inputBox},r.a.createElement("div",{className:P.a.leftCol},r.a.createElement("label",{htmlFor:"l-email"},"Email:")),r.a.createElement("div",{className:P.a.rightCol},r.a.createElement("input",{name:"l-email",type:"email",value:this.state.email,onChange:this.handleEmailChange}))),r.a.createElement("div",{className:P.a.inputBox},r.a.createElement("div",{className:P.a.leftCol},r.a.createElement("label",{htmlFor:"l-password"},"Password:")),r.a.createElement("div",{className:P.a.rightCol},r.a.createElement("input",{name:"l-password",type:"password",value:this.state.password,onChange:this.handlePasswordChange}))),r.a.createElement("input",{type:"submit",value:"Log In!"})))}}]),a}(n.Component),H=t(7),O=t.n(H),_=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={name:"",email:"",password:"",passHasCap:!1,passHasLow:!1,passHasDig:!1,passHasPunc:!1,error:null,redirectToHome:!1},t.handleNameChange=t.handleNameChange.bind(Object(S.a)(Object(S.a)(t))),t.handleEmailChange=t.handleEmailChange.bind(Object(S.a)(Object(S.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(S.a)(Object(S.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(S.a)(Object(S.a)(t))),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){e.target.value.match(/[A-Z]/g)?this.setState({passHasCap:!0}):this.setState({passHasCap:!1}),e.target.value.match(/[a-z]/g)?this.setState({passHasLow:!0}):this.setState({passHasLow:!1}),e.target.value.match(/\d/g)?this.setState({passHasDig:!0}):this.setState({passHasDig:!1}),e.target.value.match(/[.,\/#!$%^&*;:{}=\-_`~()]/g)?this.setState({passHasPunc:!0}):this.setState({passHasPunc:!1}),this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),this.state.password.length<10||this.state.password>99?this.setState({error:{type:"auth_error",status:401,message:"Password must be between 10 and 128 characters."},password:"",passHasCap:!1,passHasLow:!1,passHasDig:!1,passHasPunc:!1}):this.state.passHasCap&&this.state.passHasLow&&this.state.passHasDig&&this.state.passHasPunc?w.a.post("/auth/signup",{name:this.state.name,email:this.state.email,password:this.state.password}).then(function(e){e.data.type.includes("error")?a.setState({error:e.data,email:"",password:"",passHasCap:!1,passHasLow:!1,passHasDig:!1,passHasPunc:!1}):(localStorage.setItem("mapleToken",e.data.token),a.props.handleSignup(e.data),a.setState({redirectToHome:!0}))}).catch(function(e){a.setState({error:{type:"rate_error",status:429,message:"Maximum accounts exceeded. Please try again later."}})}):this.setState({error:{type:"auth_error",status:401,message:"Password not strong enough. Please meet requirements below."},password:"",passHasCap:!1,passHasLow:!1,passHasDig:!1,passHasPunc:!1})}},{key:"render",value:function(){if(this.state.redirectToHome)return r.a.createElement(b.a,{to:"/"});var e=this.state.error?r.a.createElement(k,{error:this.state.error}):"";return r.a.createElement("div",{className:O.a.SignupPage},this.props.NavBar,r.a.createElement("h3",null,"Create a new account:"),e,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:O.a.inputBox},r.a.createElement("div",{className:O.a.leftCol},r.a.createElement("label",{htmlFor:"s-name"},"Username:")),r.a.createElement("div",{className:O.a.rightCol},r.a.createElement("input",{name:"s-name",type:"text",value:this.state.name,onChange:this.handleNameChange}))),r.a.createElement("div",{className:O.a.inputBox},r.a.createElement("div",{className:O.a.leftCol},r.a.createElement("label",{htmlFor:"s-email"},"Email:")),r.a.createElement("div",{className:O.a.rightCol},r.a.createElement("input",{name:"s-email",type:"email",value:this.state.email,onChange:this.handleEmailChange}))),r.a.createElement("div",{className:O.a.inputBox},r.a.createElement("div",{className:O.a.leftCol},r.a.createElement("label",{htmlFor:"s-password"},"Password:")),r.a.createElement("div",{className:O.a.rightCol},r.a.createElement("input",{name:"s-password",type:"password",value:this.state.password,onChange:this.handlePasswordChange}))),r.a.createElement("div",null,r.a.createElement("p",null,"Password must meet these requirements:"),r.a.createElement("ul",null,r.a.createElement("li",{className:this.state.password.length>9&&this.state.password.length<129?"green":"red"},"Length (10 to 128): ",this.state.password.length),r.a.createElement("li",{className:this.state.passHasCap?"green":"red"},"Contain 1+ uppercase letter (A-Z)"),r.a.createElement("li",{className:this.state.passHasLow?"green":"red"},"Contain 1+ lowercase letter (a-z)"),r.a.createElement("li",{className:this.state.passHasDig?"green":"red"},"Contain 1+ digit (0-9)"),r.a.createElement("li",{className:this.state.passHasPunc?"green":"red"},"Contain 1+ special character (punctuation)"))),r.a.createElement("input",{type:"submit",value:"Sign Up!"})))}}]),a}(n.Component),y=function(e){return r.a.createElement("div",{className:"NoMatchPage"},e.NavBar,r.a.createElement("br",null),"404!!11!!!",r.a.createElement("br",null),"Page Not Found \ud83e\udd14")};function L(){localStorage.removeItem("mapleToken")}var x={setToken:function(e){return e?(console.log("Saving token in localStorage via tokenService::setToken()"),localStorage.setItem("mapleToken",e),!0):(console.log("No token found in storage via tokenService::setToken()"),L(),!1)},removeToken:L,authMeFromLocalToken:function(){return new Promise(function(e,a){var t=localStorage.getItem("mapleToken");t&&"undefined"!==t||(L(),a("No token in localStorage")),w.a.post("/auth/me/from/token",{token:t}).then(function(t){if("success"!==t.data.type)a(t.data.message);else{localStorage.setItem("mapleToken",t.data.token);var n={token:t.data.token,user:t.data.user};e(n)}})})}},B=t(67),T=t(29),F=t.n(T),D=function(e){return r.a.createElement("header",{className:F.a.header},e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,e.user.name," | "),r.a.createElement(B.a,{to:"/"},"Home"),"\xa0",r.a.createElement(B.a,{to:"/account"},"My Account"),"\xa0",r.a.createElement(B.a,{to:"/",onClick:e.handleLogout},"Log out"),"\xa0"):r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{to:"/"},"Home"),"\xa0",r.a.createElement(B.a,{to:"/login"},"Log in"),"\xa0",r.a.createElement(B.a,{to:"/signup"},"Sign up"),"\xa0"))},M=(t(64),function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).handleSomeChange=function(){},t.handleSubmit=function(){},t.state={joe:"bob"},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.state.error?r.a.createElement(k,{error:this.state.error}):"";return r.a.createElement("div",null,r.a.createElement("h3",null,"Add Character:"),e,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"l-ign"},"IGN:")),r.a.createElement("div",null,r.a.createElement("input",{name:"l-ign",type:"text",value:this.state.joe,onChange:this.handleSomeChange}))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"l-class"},"Class:")),r.a.createElement("div",null,r.a.createElement("input",{name:"l-class",type:"text",value:this.state.joe,onChange:this.handleSomeChange}))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"l-level"},"Level:")),r.a.createElement("div",null,r.a.createElement("input",{name:"l-level",type:"text",value:this.state.joe,onChange:this.handleSomeChange}))),r.a.createElement("input",{type:"submit",value:"Create!"})))}}]),a}(n.Component)),A=function(e){return r.a.createElement("div",null,"Detail here")},I=function(e){return r.a.createElement("div",null,"A Character here:",r.a.createElement(A,null))},U=function(e){return r.a.createElement("div",{className:"AccountPage"},e.NavBar,"Account Page",r.a.createElement("div",{className:"left"},r.a.createElement(I,null)),r.a.createElement("div",{className:"right"},r.a.createElement(M,null)))},q=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).handleSomeClick=function(e){},t.handleLoginOrSignup=function(e){x.setToken(e.token)&&t.setState({token:e.token,user:e.user})},t.setUserStateFromLocalToken=Object(c.a)(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.authMeFromLocalToken();case 3:(a=e.sent)?t.setState({token:a.token,user:a.user}):t.setState({token:"",user:null}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("auth challenge failed"),t.setState({token:"",user:null,error:e.t0});case 11:case"end":return e.stop()}},e,this,[[0,7]])})),t.handleLogout=function(){x.removeToken(),t.setState({token:"",user:null})},t.state={token:"",user:null,error:null},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setUserStateFromLocalToken()}},{key:"render",value:function(){var e=this,a=r.a.createElement(D,{user:this.state.user,handleLogout:this.handleLogout});return r.a.createElement("div",{className:"App"},r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a,{exact:!0,path:"/",render:function(){return r.a.createElement(f,{NavBar:a})}}),r.a.createElement(v.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(j,{NavBar:a,handleLogin:e.handleLoginOrSignup})}}),r.a.createElement(v.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(_,{NavBar:a,handleSignup:e.handleLoginOrSignup})}}),r.a.createElement(v.a,{exact:!0,path:"/account",render:function(){return e.state.user?r.a.createElement(U,{NavBar:a}):r.a.createElement(b.a,{to:"/login"})}}),r.a.createElement(v.a,{exact:!0,path:"/404",render:function(){return r.a.createElement(y,{NavBar:a})}}),r.a.createElement(v.a,{render:function(){return r.a.createElement(b.a,{to:"/404"})}}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e,a,t){e.exports={Signup:"SignupPage_Signup__3LOPV",inputBox:"SignupPage_inputBox__30c98",leftCol:"SignupPage_leftCol__1S5xp",rightCol:"SignupPage_rightCol__2bUst",red:"SignupPage_red__34BbN",green:"SignupPage_green__21x9N"}}},[[30,2,1]]]);
//# sourceMappingURL=main.5138d67a.chunk.js.map