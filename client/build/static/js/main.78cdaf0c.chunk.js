(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,a,t){e.exports={Signup:"SignupPage_Signup__3LOPV",inputBox:"SignupPage_inputBox__30c98",leftCol:"SignupPage_leftCol__1S5xp",rightCol:"SignupPage_rightCol__2bUst",red:"SignupPage_red__34BbN",green:"SignupPage_green__21x9N"}},16:function(e,a,t){e.exports={Login:"LoginPage_Login__2gePA",inputBox:"LoginPage_inputBox__2kjS5",leftCol:"LoginPage_leftCol__a_FMq",rightCol:"LoginPage_rightCol__2u4Oe"}},17:function(e,a,t){e.exports={CharacterDetail:"CharacterDetail_CharacterDetail__2T0Qs",detailSegment:"CharacterDetail_detailSegment__ELXuO",stackedDetail:"CharacterDetail_stackedDetail__26cOG",leftDetail:"CharacterDetail_leftDetail__3v1Qq",ign:"CharacterDetail_ign__3XmEo",class:"CharacterDetail_class__1rWw9",level:"CharacterDetail_level__2LB2e"}},18:function(e,a,t){e.exports={CharacterList:"CharacterList_CharacterList__1B-I8",myCharactersListSegment:"CharacterList_myCharactersListSegment__3sQX-"}},21:function(e,a,t){e.exports={AccountPage:"AccountPage_AccountPage__-xST7",left:"AccountPage_left__2_GEo",right:"AccountPage_right__2UD6U"}},33:function(e,a,t){e.exports=t(72)},38:function(e,a,t){},5:function(e,a,t){e.exports={NavBar:"NavBar_NavBar__iHebZ",navItem:"NavBar_navItem__19A9q",left:"NavBar_left__1Tjnk",right:"NavBar_right__29FYm"}},67:function(e,a,t){},72:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(31),l=t.n(s),c=(t(38),t(24)),o=t.n(c),i=t(32),m=t(7),u=t(8),h=t(10),g=t(9),p=t(11),d=t(75),v=t(77),E=t(76),C=t(74),f=function(e){return r.a.createElement("div",{className:"MainPage"},e.NavBar,r.a.createElement("br",null),r.a.createElement("div",null,"Main Page - Welcome!"))},b=t(14),_=t.n(b),S=function(e){var a="";switch(e.error.type){case"auth_error":a=e.error.message;break;case"db_error":a=e.error.error.message;break;case"rate_error":a=e.error.message}return r.a.createElement("div",{className:"Error-panel"},r.a.createElement("p",null,a))},N=t(16),k=t.n(N),w=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).handleEmailChange=function(e){return t.setState({email:e.target.value})},t.handlePasswordChange=function(e){return t.setState({password:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),_.a.post("/auth/login",{email:t.state.email,password:t.state.password}).then(function(e){e.data.type.includes("error")?t.setState({error:e.data}):(localStorage.setItem("mapleToken",e.data.token),t.props.handleLogin(e.data),t.setState({error:null,redirectToHome:!0}))}).catch(function(e){t.setState({error:{type:"rate_error",status:429,message:"Maximum login attempts exceeded. Please try again later."},email:"",password:""})})},t.state={email:"",password:"",error:null,redirectToHome:!1},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){if(this.state.redirectToHome)return r.a.createElement(C.a,{to:"/"});var e=this.state.error?r.a.createElement(S,{error:this.state.error}):"";return r.a.createElement("div",{className:"LoginPage"},this.props.NavBar,r.a.createElement("h3",null,"Log in:"),e,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:k.a.inputBox},r.a.createElement("div",{className:k.a.leftCol},r.a.createElement("label",{htmlFor:"l-email"},"Email:")),r.a.createElement("div",{className:k.a.rightCol},r.a.createElement("input",{name:"l-email",type:"email",value:this.state.email,onChange:this.handleEmailChange}))),r.a.createElement("div",{className:k.a.inputBox},r.a.createElement("div",{className:k.a.leftCol},r.a.createElement("label",{htmlFor:"l-password"},"Password:")),r.a.createElement("div",{className:k.a.rightCol},r.a.createElement("input",{name:"l-password",type:"password",value:this.state.password,onChange:this.handlePasswordChange}))),r.a.createElement("input",{type:"submit",value:"Log In!"})))}}]),a}(n.Component),L=t(12),P=t(13),y=t.n(P),j=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).state={name:"",email:"",password:"",passHasCap:!1,passHasLow:!1,passHasDig:!1,passHasPunc:!1,error:null,redirectToHome:!1},t.handleNameChange=t.handleNameChange.bind(Object(L.a)(Object(L.a)(t))),t.handleEmailChange=t.handleEmailChange.bind(Object(L.a)(Object(L.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(L.a)(Object(L.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(L.a)(Object(L.a)(t))),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){e.target.value.match(/[A-Z]/g)?this.setState({passHasCap:!0}):this.setState({passHasCap:!1}),e.target.value.match(/[a-z]/g)?this.setState({passHasLow:!0}):this.setState({passHasLow:!1}),e.target.value.match(/\d/g)?this.setState({passHasDig:!0}):this.setState({passHasDig:!1}),e.target.value.match(/[.,\/#!$%^&*;:{}=\-_`~()]/g)?this.setState({passHasPunc:!0}):this.setState({passHasPunc:!1}),this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),this.state.password.length<10||this.state.password>99?this.setState({error:{type:"auth_error",status:401,message:"Password must be between 10 and 128 characters."},password:"",passHasCap:!1,passHasLow:!1,passHasDig:!1,passHasPunc:!1}):this.state.passHasCap&&this.state.passHasLow&&this.state.passHasDig&&this.state.passHasPunc?_.a.post("/auth/signup",{name:this.state.name,email:this.state.email,password:this.state.password}).then(function(e){e.data.type.includes("error")?a.setState({error:e.data,email:"",password:"",passHasCap:!1,passHasLow:!1,passHasDig:!1,passHasPunc:!1}):(localStorage.setItem("mapleToken",e.data.token),a.props.handleSignup(e.data),a.setState({redirectToHome:!0}))}).catch(function(e){a.setState({error:{type:"rate_error",status:429,message:"Maximum accounts exceeded. Please try again later."}})}):this.setState({error:{type:"auth_error",status:401,message:"Password not strong enough. Please meet requirements below."},password:"",passHasCap:!1,passHasLow:!1,passHasDig:!1,passHasPunc:!1})}},{key:"render",value:function(){if(this.state.redirectToHome)return r.a.createElement(C.a,{to:"/"});var e=this.state.error?r.a.createElement(S,{error:this.state.error}):"";return r.a.createElement("div",{className:y.a.SignupPage},this.props.NavBar,r.a.createElement("h3",null,"Create a new account:"),e,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:y.a.inputBox},r.a.createElement("div",{className:y.a.leftCol},r.a.createElement("label",{htmlFor:"s-name"},"Username:")),r.a.createElement("div",{className:y.a.rightCol},r.a.createElement("input",{name:"s-name",type:"text",value:this.state.name,onChange:this.handleNameChange}))),r.a.createElement("div",{className:y.a.inputBox},r.a.createElement("div",{className:y.a.leftCol},r.a.createElement("label",{htmlFor:"s-email"},"Email:")),r.a.createElement("div",{className:y.a.rightCol},r.a.createElement("input",{name:"s-email",type:"email",value:this.state.email,onChange:this.handleEmailChange}))),r.a.createElement("div",{className:y.a.inputBox},r.a.createElement("div",{className:y.a.leftCol},r.a.createElement("label",{htmlFor:"s-password"},"Password:")),r.a.createElement("div",{className:y.a.rightCol},r.a.createElement("input",{name:"s-password",type:"password",value:this.state.password,onChange:this.handlePasswordChange}))),r.a.createElement("div",null,r.a.createElement("p",null,"Password must meet these requirements:"),r.a.createElement("ul",null,r.a.createElement("li",{className:this.state.password.length>9&&this.state.password.length<129?"green":"red"},"Length (10 to 128): ",this.state.password.length),r.a.createElement("li",{className:this.state.passHasCap?"green":"red"},"Contain 1+ uppercase letter (A-Z)"),r.a.createElement("li",{className:this.state.passHasLow?"green":"red"},"Contain 1+ lowercase letter (a-z)"),r.a.createElement("li",{className:this.state.passHasDig?"green":"red"},"Contain 1+ digit (0-9)"),r.a.createElement("li",{className:this.state.passHasPunc?"green":"red"},"Contain 1+ special character (punctuation)"))),r.a.createElement("input",{type:"submit",value:"Sign Up!"})))}}]),a}(n.Component),B=function(e){return r.a.createElement("div",{className:"NoMatchPage"},e.NavBar,r.a.createElement("br",null),"404!!11!!!",r.a.createElement("br",null),"Page Not Found \ud83e\udd14")};function O(){localStorage.removeItem("mapleToken")}var H={setToken:function(e){return e?(console.log("Saving token in localStorage via tokenService::setToken()"),localStorage.setItem("mapleToken",e),!0):(console.log("No token found in storage via tokenService::setToken()"),O(),!1)},removeToken:O,authMeFromLocalToken:function(){return new Promise(function(e,a){var t=localStorage.getItem("mapleToken");t&&"undefined"!==t||(O(),a("No token in localStorage")),_.a.post("/auth/me/from/token",{token:t}).then(function(t){if("success"!==t.data.type)a(t.data.message);else{localStorage.setItem("mapleToken",t.data.token);var n={token:t.data.token,user:t.data.user};e(n)}})})}},D=t(73),x=t(5),I=t.n(x),F=function(e){return r.a.createElement("nav",{className:I.a.NavBar},e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:I.a.left},r.a.createElement("span",{className:I.a.navItem},e.user.name),"\xa0|\xa0",r.a.createElement(D.a,{className:I.a.navItem,to:"/"},"Home"),"\xa0"),r.a.createElement("div",{className:I.a.right},r.a.createElement(D.a,{className:I.a.navItem,to:"/account"},"My Account"),"\xa0",r.a.createElement(D.a,{className:I.a.navItem,to:"/",onClick:e.handleLogout},"Log out"),"\xa0")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:I.a.left},r.a.createElement(D.a,{className:I.a.navItem,to:"/"},"Home"),"\xa0"),r.a.createElement("div",{className:I.a.right},r.a.createElement(D.a,{className:I.a.navItem,to:"/signup"},"Sign up"),"\xa0",r.a.createElement(D.a,{className:I.a.navItem,to:"/login"},"Log in"),"\xa0")))},M=(t(67),t(17)),T=t.n(M),A=function(e){var a=e.character,t=e.deleteCharacter,n="";switch(console.log(a.class),a.class){case"Bow Master":case"Marksman":n="%PUBLIC_URL%/images/jobicons/bowman.png";break;case"Arch Mage (I/L)":case"Arch Mage (F/P)":case"Bishop":n="%PUBLIC_URL%/images/jobicons/magician.png";break;case"Buccaneer":case"Corsair":n="%PUBLIC_URL%/images/jobicons/pirate.png";break;case"Night Lord":case"Shadower":n="%PUBLIC_URL%/images/jobicons/thief.png";break;case"Hero":case"Paladin":case"Dark Knight":n="%PUBLIC_URL%/images/jobicons/warrior.png";break;default:n="%PUBLIC_URL%/images/jobicons/all.png"}return r.a.createElement("div",{className:T.a.CharacterDetail},r.a.createElement("div",null,r.a.createElement("img",{src:n,alt:"Class Type"})),r.a.createElement("div",{className:T.a.stackedDetail},r.a.createElement("p",{className:T.a.ign},a.ign),r.a.createElement("p",{className:T.a.ign},a.class)),r.a.createElement("div",{className:T.a.stackedDetail},r.a.createElement("p",null,"Lvl."),r.a.createElement("p",{className:T.a.level},a.level)),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:t},"Delete")))},U=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).handleIgnChange=function(e){return t.setState({ign:e.target.value})},t.handleClassChange=function(e){return t.setState({class:e.target.value})},t.handleLevelChange=function(e){return t.setState({level:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),_.a.post("/users/".concat(t.props.user._id,"/characters"),{ign:t.state.ign,user_id:t.props.user._id,class:t.state.class,level:t.state.level}).then(function(e){e.type}).catch(function(e){t.setState({error:{type:"server_error",status:500,message:"An error has occured, please try again later."}})})},t.state={ign:"",class:"",level:"",error:""},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.error?r.a.createElement(S,{error:this.state.error}):"";return r.a.createElement("div",null,r.a.createElement("h3",null,"Add Character:"),e,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"l-ign"},"IGN:"),r.a.createElement("input",{name:"l-ign",type:"text",value:this.state.ign,onChange:this.handleIgnChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"l-class"},"Class:"),r.a.createElement("select",{name:"l-class",value:this.state.class,onChange:this.handleClassChange},r.a.createElement("option",{value:"Bow Master"},"Bow Master"),r.a.createElement("option",{value:"Marksman"},"Marksman"),r.a.createElement("option",{value:"Arch Mage (I/L)"},"Arch Mage (I/L)"),r.a.createElement("option",{value:"Arch Mage (F/P)"},"Arch Mage (F/P)"),r.a.createElement("option",{value:"Bishop"},"Bishop"),r.a.createElement("option",{value:"Buccaneer"},"Buccaneer"),r.a.createElement("option",{value:"Corsair"},"Corsair"),r.a.createElement("option",{value:"Night Lord"},"Night Lord"),r.a.createElement("option",{value:"Shadower"},"Shadower"),r.a.createElement("option",{value:"Hero"},"Hero"),r.a.createElement("option",{value:"Paladin"},"Paladin"),r.a.createElement("option",{value:"Dark Knight"},"Dark Knight"))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"l-level"},"Level:"),r.a.createElement("input",{name:"l-level",type:"number",min:"1",max:"200",value:this.state.level,onChange:this.handleLevelChange})),r.a.createElement("input",{type:"submit",value:"Create!"})))}}]),a}(n.Component),V=t(18),R=t.n(V),q=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).toggleFormVisible=function(e){t.setState(function(e){return{createFormVisible:!e.createFormVisible}})},t.state={createFormVisible:!1},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:R.a.CharacterList},r.a.createElement("ul",null,this.props.user.characters.map(function(a,t){return r.a.createElement("li",{key:t,className:R.a.myCharactersListSegment},r.a.createElement(A,{character:a,deleteCharacter:e.props.deleteCharacter}))}),this.state.createFormVisible?r.a.createElement("li",{className:R.a.myCharactersListSegment},r.a.createElement("button",{type:"button",onClick:this.toggleFormVisible},"Hide form"),r.a.createElement(U,null)):r.a.createElement("li",{className:R.a.myCharactersListSegment},r.a.createElement("button",{type:"button",onClick:this.toggleFormVisible},"Add a char"))))}}]),a}(n.Component),W=t(21),G=t.n(W),K=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).deleteCharacter=function(e){console.log("test delte character")},t.state={characters:[]},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;_.a.get("/api/users/".concat(this.props.user._id,"/characters")).then(function(a){e.setState({characters:a})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.NavBar,r.a.createElement("div",{className:G.a.AccountPage},r.a.createElement("div",{className:G.a.left},r.a.createElement("h1",null,"My Runs")),r.a.createElement("div",{className:G.a.right},r.a.createElement("h1",null,"My Characters"),r.a.createElement(q,{user:this.props.user,deleteCharacter:this.deleteCharacter}))))}}]),a}(n.Component),Q=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).handleSomeClick=function(e){},t.deleteCharacter=function(e){},t.handleLoginOrSignup=function(e){H.setToken(e.token)&&t.setState({token:e.token,user:e.user})},t.setUserStateFromLocalToken=Object(i.a)(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.authMeFromLocalToken();case 3:(a=e.sent)?t.setState({token:a.token,user:a.user}):t.setState({token:"",user:null}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("auth challenge failed"),t.setState({token:"",user:null,error:e.t0});case 11:case"end":return e.stop()}},e,this,[[0,7]])})),t.handleLogout=function(){H.removeToken(),t.setState({token:"",user:null})},t.state={token:"",user:null,error:null},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setUserStateFromLocalToken()}},{key:"render",value:function(){var e=this,a=r.a.createElement(F,{user:this.state.user,handleLogout:this.handleLogout});return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,null,r.a.createElement(v.a,null,r.a.createElement(E.a,{exact:!0,path:"/",render:function(){return r.a.createElement(f,{NavBar:a})}}),r.a.createElement(E.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(w,{NavBar:a,handleLogin:e.handleLoginOrSignup})}}),r.a.createElement(E.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(j,{NavBar:a,handleSignup:e.handleLoginOrSignup})}}),r.a.createElement(E.a,{path:"/account",render:function(){return e.state.user?r.a.createElement(K,{NavBar:a,user:e.state.user}):r.a.createElement(C.a,{to:"/login"})}}),r.a.createElement(E.a,{exact:!0,path:"/404",render:function(){return r.a.createElement(B,{NavBar:a})}}),r.a.createElement(E.a,{render:function(){return r.a.createElement(C.a,{to:"/404"})}}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,2,1]]]);
//# sourceMappingURL=main.78cdaf0c.chunk.js.map